#!/bin/bash
function get_cookie {
echo -n "user name: "
read uname 
if [[ -z "$uname" ]]; then  echo "nothing entered, exit"; exit;  fi
echo -n "password: "
read -s passwd
if [[ -z "$passwd" ]]; then  echo "nothing entered, exit"; exit;  fi

wget --save-cookies=${cookieFile} -4 --keep-session-cookies -O - \
-S --post-data="name=${uname}&password=${passwd}&enter=Sign in&autologin=1&request=" \
 'http://mon.actionpay.ru/index.php?login=1' 1>/dev/null 2>&1

}

function check_cookie {
if [ ! -e ${cookieFile} ]; then
echo "no cookie file found :("
exit 1
fi
grep sessionid ${cookieFile} 1>/dev/null 2>&1 && echo "good cookie, yummy!" || echo "No session found in cookie file!"
}
case $1 in
	check) check_cookie;;
	get) get_cookie;;
	delete) rm ${cookieFile};;
	*) echo "$0 cookie usage: reports cookie [ check | get | delete ]"
esac
